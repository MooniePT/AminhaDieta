<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.chart.*?>

<VBox xmlns="http://javafx.com/javafx" xmlns:fx="http://javafx.com/fxml" fx:controller="app.ui.controller.HistoryController" spacing="20" styleClass="content-area">
    <HBox alignment="CENTER_LEFT" spacing="10">
        <Label text="Histórico" styleClass="label-header"/>
        <Region HBox.hgrow="ALWAYS" />
        <DatePicker fx:id="startDatePicker" promptText="Data Início" prefWidth="120"/>
        <DatePicker fx:id="endDatePicker" promptText="Data Fim" prefWidth="120"/>
        <TextField fx:id="searchField" promptText="Pesquisar refeições..." prefWidth="200" />
        <Button text="Download PDF" onAction="#handleDownloadPdf" />
    </HBox>

    <TabPane tabClosingPolicy="UNAVAILABLE" VBox.vgrow="ALWAYS">
        <Tab text="Refeições">
            <VBox spacing="10" style="-fx-padding: 10;">
                <HBox spacing="10" alignment="CENTER_LEFT">
                    <TextField fx:id="searchField" promptText="Pesquisar alimento..." HBox.hgrow="ALWAYS"/>
                    <DatePicker fx:id="startDatePicker" promptText="Data Início" prefWidth="120"/>
                    <DatePicker fx:id="endDatePicker" promptText="Data Fim" prefWidth="120"/>
                    <Button text="Atualizar" onAction="#onFilter" styleClass="button-action"/>
                    <Button text="Exportar PDF" disable="true"/>
                </HBox>
                <TableView fx:id="mealsTable" VBox.vgrow="ALWAYS">
                    <columns>
                        <TableColumn fx:id="dateCol" text="Data/Hora" prefWidth="150"/>
                        <TableColumn fx:id="descCol" text="Descrição" prefWidth="300" />
                        <TableColumn fx:id="calCol" text="Calorias" prefWidth="100" />
                    </columns>
                </TableView>
            </VBox>
        </Tab>
        <Tab text="Exercícios">
            <VBox spacing="10" style="-fx-padding: 10;">
                <TableView fx:id="exercisesTable" VBox.vgrow="ALWAYS">
                    <columns>
                        <TableColumn fx:id="exDateCol" text="Data/Hora" prefWidth="150"/>
                        <TableColumn fx:id="exTypeCol" text="Tipo" prefWidth="200" />
                        <TableColumn fx:id="exDurationCol" text="Duração (min)" prefWidth="100" />
                        <TableColumn fx:id="exCalCol" text="Calorias" prefWidth="100" />
                    </columns>
                </TableView>
            </VBox>
        </Tab>
        <Tab text="Hidratação">
            <VBox spacing="10" style="-fx-padding: 10;">
                <Label text="Histórico de Hidratação" styleClass="label-subheader"/>
                <BarChart fx:id="hydrationChart" legendVisible="false" VBox.vgrow="ALWAYS">
                    <xAxis><CategoryAxis label="Dia" /></xAxis>
                    <yAxis><NumberAxis label="Água (ml)" /></yAxis>
                </BarChart>
            </VBox>
        </Tab>
        <Tab text="Evolução">
             <VBox spacing="10" style="-fx-padding: 10;">
                <Label text="Evolução de Peso e Calorias" styleClass="label-subheader"/>
                <!-- Reusing LineChart logic, maybe show daily calories history too? -->
                 <LineChart fx:id="historyChart">
                    <xAxis><CategoryAxis label="Data" /></xAxis>
                    <yAxis><NumberAxis label="Valor" /></yAxis>
                </LineChart>
             </VBox>
        </Tab>
    </TabPane>
</VBox>
